---
const faqs = [
  {
    question: "Preciso instalar algum aplicativo?",
    answer:
      "Não! O iGenda funciona totalmente online através do seu navegador. Você pode acessar de qualquer dispositivo com internet, sem necessidade de instalar aplicativos.",
  },
  {
    question: "Como os clientes fazem o agendamento?",
    answer:
      "Seus clientes podem agendar diretamente pelo seu link personalizado. O processo é simples e intuitivo, permitindo que escolham o serviço, profissional e horário disponível.",
  },
  {
    question: "Como funcionam os lembretes por e-mail?",
    answer:
      "O sistema envia automaticamente lembretes por Whatsapp para seus clientes antes do agendamento.",
  },
  {
    question: "Posso personalizar minha agenda?",
    answer:
      "Sim! Você pode personalizar horários de funcionamento, intervalos de atendimento, duração dos serviços e muito mais. O sistema se adapta às suas necessidades.",
  },
  {
    question: "Quanto tempo leva para configurar o sistema?",
    answer:
      "A configuração inicial é rápida e pode ser feita em poucos minutos. Você só precisa cadastrar seus profissionais, serviços e horários de funcionamento.",
  },
  {
    question: "Posso solicitar reembolso caso queira cancelar?",
    answer:
      "Sim! Oferecemos um período possibilidade de reembolso de 7 dias caso você não queira continuar com a sua assinatura.",
  },
];
---

<section
  class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20 w-full"
>
  <!-- Header Section -->
  <div class="text-center mb-8 sm:mb-12">
    <!-- Título principal -->
    <h2
      class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-200 mb-3 sm:mb-4"
    >
      Tire suas dúvidas
    </h2>

    <!-- Descrição -->
    <p class="text-gray-400 text-sm sm:text-base lg:text-lg max-w-2xl mx-auto">
      Encontre respostas para as perguntas mais comuns sobre o iGenda e como ele
      pode ajudar seu negócio.
    </p>
  </div>

  <!-- Search Bar Section -->
  <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 mb-6 sm:mb-8">
    <!-- Barra de pesquisa -->
    <div class="flex-1 relative">
      <div
        class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="text-gray-400 sm:w-5 sm:h-5"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </div>
      <input
        type="text"
        placeholder="Pesquisar perguntas..."
        class="w-full pl-8 sm:pl-10 pr-4 py-2 sm:py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm sm:text-base"
      />
    </div>

    <!-- Botão Expandir Todos -->
    <button
      class="flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-gray-200 hover:bg-gray-700/50 transition-colors text-sm sm:text-base"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="14"
        height="14"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="sm:w-4 sm:h-4"
      >
        <polyline points="6,9 12,15 18,9"></polyline>
      </svg>
      <span>Expandir Todos</span>
    </button>
  </div>

  <!-- FAQ Accordion Section -->
  <div class="space-y-3 sm:space-y-4 mb-8 sm:mb-12">
    {
      faqs.map(({ question, answer }) => (
        <details class="group">
          <summary class="flex items-center justify-between p-3 sm:p-4 bg-gray-800/50 border border-gray-700 rounded-lg cursor-pointer hover:bg-gray-700/50 transition-colors">
            <span class="text-gray-200 font-medium text-sm sm:text-base">
              {question}
            </span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-gray-400 group-open:rotate-180 transition-transform sm:w-5 sm:h-5"
            >
              <polyline points="6,9 12,15 18,9" />
            </svg>
          </summary>
          <div class="p-3 sm:p-4 bg-gray-800/30 border border-gray-700 border-t-0 rounded-b-lg">
            <p class="text-gray-300 leading-relaxed text-sm sm:text-base">
              {answer}
            </p>
          </div>
        </details>
      ))
    }
  </div>

  <!-- Footer Section -->
  <div class="text-center">
    <p class="text-gray-400 mb-4 sm:mb-6 text-sm sm:text-base">
      Ainda tem dúvidas? Entre em contato com nossa equipe de suporte.
    </p>

    <a
      href="https://api.whatsapp.com/send/?phone=64992834346&text=Ol%C3%A1%21+Preciso+de+ajuda+com+a+iGenda.&type=phone_number&app_absent=0"
      class="inline-flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm sm:text-base"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="sm:w-5 sm:h-5"
      >
        <path
          d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
        ></path>
      </svg>
      <span>Falar com Suporte</span>
    </a>
  </div>
</section>

<script>
  // Funcionalidade de pesquisa
  document.addEventListener("DOMContentLoaded", function () {
    const searchInput = document.querySelector(
      'input[placeholder="Pesquisar perguntas..."]'
    );
    const faqItems = document.querySelectorAll("details");

    if (searchInput) {
      searchInput.addEventListener("input", function (e) {
        const target = e.target as HTMLInputElement;
        const searchTerm = target.value.toLowerCase();

        faqItems.forEach((item) => {
          const questionElement = item.querySelector("summary span");
          const answerElement = item.querySelector("p");

          if (questionElement && answerElement) {
            const question = questionElement.textContent?.toLowerCase() || "";
            const answer = answerElement.textContent?.toLowerCase() || "";

            if (question.includes(searchTerm) || answer.includes(searchTerm)) {
              item.style.display = "block";
            } else {
              item.style.display = "none";
            }
          }
        });
      });
    }

    // Funcionalidade do botão "Expandir Todos"
    const expandAllBtn = document.querySelector("button");
    let allExpanded = false;

    if (expandAllBtn) {
      expandAllBtn.addEventListener("click", function () {
        allExpanded = !allExpanded;
        faqItems.forEach((item) => {
          item.open = allExpanded;
        });

        // Atualizar texto do botão
        const btnText = expandAllBtn.querySelector("span");
        const btnIcon = expandAllBtn.querySelector("svg");

        if (btnText && btnIcon) {
          if (allExpanded) {
            btnText.textContent = "Recolher Todos";
            btnIcon.style.transform = "rotate(180deg)";
          } else {
            btnText.textContent = "Expandir Todos";
            btnIcon.style.transform = "rotate(0deg)";
          }
        }
      });
    }
  });
</script>
